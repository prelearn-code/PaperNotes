# 一、PCS-PLONK

## 1 理论层：PLONK 式批量聚合机制

**1 Setup：通用的结构化参考串 SRS**  
输入安全参数 λ，输出 (pk, sk)。核心机制与标准 KZG 一致，生成 pk = (g, g^α, …, g^{α^{s−1}})。PLONK 采用通用 SRS，所有多项式共享同一套 Powers of Tau 参数，无需重复 Setup。

**2 Commit：多项式向量的独立锁定**  
输入多项式列表 (f₁, f₂, …, f_k)，输出承诺列表 (C₁, C₂, …, C_k)，其中 C_i = g^{f_i(α)}。各多项式在承诺阶段彼此独立，但统一绑定在同一秘密点 α 上，为后续线性组合聚合提供代数基础。

**3 CreateWitness：随机线性组合 RLC 聚合**  
Verifier 提供随机挑战 v。Prover 构造聚合多项式 h(X) = ∑_{i=1}^k v^{i−1}(f_i(X) − y_i)，并计算商多项式 q(X) = h(X)/(X − z)，最终生成唯一 Witness W = g^{q(α)}。基于 Schwartz-Zippel 引理，若 h(X) 可被 (X − z) 整除，则以高概率保证所有 f_i 在 z 处评估正确。

**4 VerifyEval：一次性批量校验**  
Verifier 计算聚合承诺 C_agg = ∑ v^{i−1} C_i，并通过一次配对验证完成所有多项式评估的检查，将 k 次配对压缩为一次。

## 2 实例层：直觉式极简推演

**Setup**：设 α = 10，pk = (g, g^{10}, g^{100}, …)。  
**Commit**：f₁(X)=X，f₂(X)=2X，对应 C₁=g^{10}，C₂=g^{20}。  
**CreateWitness**：在 z=3 处，y₁=3，y₂=6，取 v=2，得 h(X)=5(X−3)，q(X)=5，W=g^5。  
**VerifyEval**：C_agg = g^{10}·(g^{20})² = g^{50}，y_agg = 3 + 2·6 = 15，验证 50−15 = 5(10−3)，成立。

# 二、PCS-MPAP

## 2.1 理论层：单点 PCS 核心机制

**1 Setup**  
生成生成元 g 与秘密参数 α，发布 pk = (g, g^α, g^{α²}, …, g^{α^{s−1}})，用于在未知 α 的情况下计算 f(α) 的承诺。

**2 Commit**  
对多项式 f(X) 计算承诺 C = g^{f(α)}，实现多项式与承诺的代数绑定。

**3 CreateWitness**  
构造商多项式 ψ(X) = (f(X) − f(r))/(X − r)，并生成 Witness W = g^{ψ(α)}，证明该整除关系存在。

**4 VerifyEval**  
Verifier 检查 e(C·g^{−f(r)}, g) = e(W, g^α·g^{−r})，验证 (f(α) − f(r)) = ψ(α)(α − r)。

## 2.2 实例层：极简直觉演示

设 α=7，f(X)=3+2X，承诺 C=g^{17}。在 r=5 处，f(5)=13，ψ(X)=2，W=g^2。Verifier 检查 17−13 = 2(7−5)，等式成立，验证通过。
